<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="../css/container.css" />
    <link rel="stylesheet" type="text/css" href="../css/form.css" />
    <link rel="stylesheet" type="text/css" href="../css/checkbox.css" />
    <link rel="stylesheet" type="text/css" href="../css/spinner.css" />
    <link rel="stylesheet" type="text/css" href="../css/progress.css" />
    <link rel="stylesheet" type="text/css" href="../css/progressBar.css" />
    <link rel="stylesheet" type="text/css" href="../css/switch.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Raleway"
      rel="stylesheet"
    />
    <script type="text/javascript" src="../js/defaults.js"></script>
    <script type="text/javascript" src="../js/terminal.js"></script>
    <script type="text/javascript" src="../js/analysis.js"></script>
    <script type="text/javascript" src="../js/configFile.js"></script>
    <script type="text/javascript" src="../js/configEditor.js"></script>
    <script type="text/javascript" src="../js/controller.js"></script>
    <script type="text/javascript" src="../js/utilities.js"></script>
    <script type="text/javascript" src="../js/navigation.js"></script>
    <script type="text/javascript" src="../js/toggleables.js"></script>
    <script type="text/javascript" src="../js/htmlBuilder.js"></script>
    <meta charset="utf-8" />
    <title>AP Desktop</title>
  </head>

  <body onload="checkEnvironment(); getConfig();">
    <div id="header">
      <button id="logo">AP Desktop</button>
      <button id="page" onclick="changePage(this);">Analysis</button>
      <button id="output" onclick="changePage(this);">Output</button>
      <button id="utilities" onclick="changePage(this);">Utilities</button>
    </div>

    <!--Container for the analysis page-->
    <div class="container" id="analysis-tab" style="display: inherit">
      <div class="group" id="environment" style="display: none">
        <div class="question-fail">
          <p class="question-text">Environment</p>
        </div>
        <div class="group-content">
          <p>
            Environment is not setup. Check instructions at
            https://github.com/QutEcoacoustics/audio-analysis to install
            correctly. If installed, check the AP folder is located at C:/AP if
            on windows. Linux and Mac do not currently have support.
          </p>
          <pre style="white-space: pre-wrap;"></pre>
        </div>
      </div>

      <div id="analysis-template-holder"></div>

      <script>
        buildAnalysisForm();
      </script>
    </div>

    <!--Container for the output page-->
    <div class="container" id="output-tab" style="display: none">
      <script>
        buildOutputTemplate();
      </script>
    </div>

    <!--Container for the utilities page-->
    <div class="container" id="utilities-tab" style="display: none">
      <!-- Not needed until other options are added
      <div class="group" id="Options">
        <div class="question"><p class="question-text">Options</p></div>
        <div class="group-content">
          <li>
            <input
              id="EventUtility"
              value="EventUtility"
              class="checkbox-custom"
              name="analysis"
              type="radio"
              onchange=""
            />
            <label for="EventUtility" class="checkbox-custom-label">
              Event Detection Helper
            </label>
          </li>
        </div>
      </div> -->

      <div class="group" id="EventDetectionHelper">
        <div class="question">
          <p class="question-text">Event Detection Helper</p>
          <a id="EventDetectionHelperSelect" onclick="eventSelectFolder()">
            <div class="question-button">
              Select Folder
            </div>
          </a>
        </div>
        <div
          id="EventDetectionHelperError"
          class="group-content"
          style="display: none"
        >
          <h1 class="error">Error</h1>
          <div class="error header-content-padded" style="display: inherit">
            <p>
              Failed to find Intermediate Wav or Image file. Please ensure you
              have set "SaveIntermediateWavFiles" and "SaveSonogramImages" to
              "WhenEventsDetected" in your config file.
            </p>
          </div>
        </div>
        <div class="group-content" style="display: inherit">
          <h1
            id="EventDetectionHelperButtons"
            class="h1-no-hover"
            style="margin-bottom: -14px;"
          >
            Select Events
            <a onclick="checkAll();">Select All</a>
            <a onclick="uncheckAll();">Select None</a>
          </h1>

          <div class="spinner" id="eventspinner" style="display: none">
            <div class="rect1"></div>
            <div class="rect2"></div>
            <div class="rect3"></div>
            <div class="rect4"></div>
            <div class="rect5"></div>
          </div>

          <div
            class="header-content-padded"
            id="eventitems"
            style="display: none;"
          >
            <form id="EventDetectorForm" style="display: inherit">
              <div id="EventDetectionInputs"></div>
              <div
                class="submit"
                id="EventDetectionSubmit"
                style="display: inherit; width: 162px;"
              >
                <button type="submit">
                  Verify Events
                </button>

                <script>
                  //Captures submit button
                  const eventDetectorForm = document.querySelector(
                    "#EventDetectorForm"
                  );
                  eventDetectorForm.addEventListener(
                    "submit",
                    createEventDetectionUtility
                  );
                </script>
              </div>
            </form>
            <form id="EventDetectorAnswerForm" style="display: none">
              <div>
                <h1 style="margin: 0; padding: 0; text-align: center">Sound</h1>
                <div
                  id="EventDetectorSound"
                  style="margin: 0 auto; width: 300px; height: 54px;"
                ></div>
                <h1 style="margin: 0; padding: 0; text-align: center">
                  Spectrogram
                </h1>
                <div
                  style="overflow: hidden;"
                  id="EventDetectorSpectrogram"
                ></div>

                <table class="flex padding-right-p">
                  <tr>
                    <td>
                      <p class="checkbox-custom-label">
                        Event
                      </p>
                    </td>
                    <td>
                      <label class="switch">
                        <input
                          id="EventDetectorSwitch"
                          type="checkbox"
                          onchange="toggleEvent(this);"
                        />
                        <span class="slider"></span>
                      </label>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <p class="checkbox-custom-label">
                        Animal
                      </p>
                    </td>
                    <td>
                      <input
                        id="EventDetectorAnimal"
                        name="event-recogniser"
                        type="text"
                        disabled
                      />
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <p class="checkbox-custom-label">
                        Comment
                      </p>
                    </td>
                    <td>
                      <textarea
                        id="EventDetectorComment"
                        name="event-recogniser"
                        style="max-width: 100%; width: 100%; box-sizing: border-box; resize: vertical"
                        rows="4"
                        placeholder="Comment"
                        disabled
                      ></textarea>
                    </td>
                  </tr>
                  <tr>
                    <td colspan="2">
                      <!--Div is required to center submit button-->
                      <div>
                        <div
                          class="submit"
                          style="display: inherit; margin-top: 0; margin-bottom: 0;"
                        >
                          <button type="submit" style="display: inline">
                            Next
                          </button>
                          <script>
                            const form = document.querySelector(
                              "#EventDetectorAnswerForm"
                            );
                            form.addEventListener(
                              "submit",
                              eventDetectionUtilityNext
                            );
                          </script>
                        </div>
                      </div>
                    </td>
                  </tr>
                </table>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
